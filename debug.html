<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DEBUG â€” Supabase Connection</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{
    background:#000;
    color:#0f0;
    font-family:monospace;
    padding:20px;
}
.box{
    background:#111;
    border:1px solid #333;
    padding:20px;
    margin-bottom:20px;
    border-radius:12px;
}
pre{
    white-space:pre-wrap;
    background:#000;
    padding:10px;
    border-radius:8px;
    border:1px solid #444;
    color:#0f0;
}
</style>
</head>

<body>

<h2 style="color:#0f0;text-align:center">ğŸ” DEBUG â€” Supabase</h2>

<div class="box">
    <h3>Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„</h3>
    <pre id="conn"></pre>
</div>

<div class="box">
    <h3>Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (categories)</h3>
    <pre id="cats"></pre>
</div>

<div class="box">
    <h3>Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (products)</h3>
    <pre id="prods"></pre>
</div>

<div class="box">
    <h3>Ø¢Ø®Ø± Ø®Ø·Ø£ JavaScript</h3>
    <pre id="err"></pre>
</div>

<script>
// ----------- Ø¥Ø¹Ø¯Ø§Ø¯ Supabase -----------
const URL = "https://ztwbgqkxmdhpzqhnefty.supabase.co";
const KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0d2JncWt4bWRocHpxaG5lZnR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwMTQwMDEsImV4cCI6MjA3OTU5MDAwMX0.6W_V9v5VxQpPfv65Ygc51-m7G1Z8sl8fx1B8bWyA6Xg";

const client = supabase.createClient(URL, KEY);

document.getElementById("conn").textContent = `
URL: ${URL}
KEY loaded: ${KEY.length > 20 ? "yes" : "NO!"}
client created: ${client ? "OK" : "FAILED"}
`;


// ----------- Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ categories -----------
(async ()=>{
    const { data, error } = await client.from("categories").select("*");

    document.getElementById("cats").textContent = error
        ? "âŒ ERROR:\n" + JSON.stringify(error, null, 2)
        : "âœ” DATA:\n" + JSON.stringify(data, null, 2);
})();


// ----------- Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ products -----------
(async ()=>{
    const { data, error } = await client.from("products").select("*");

    document.getElementById("prods").textContent = error
        ? "âŒ ERROR:\n" + JSON.stringify(error, null, 2)
        : "âœ” DATA:\n" + JSON.stringify(data, null, 2);
})();


// ----------- ÙƒØ´Ù Ø¢Ø®Ø± Ø®Ø·Ø£ ----------
window.onerror = function(msg, src, line, col, err){
    document.getElementById("err").textContent = `
MESSAGE: ${msg}
FILE: ${src}
LINE: ${line}
COL: ${col}
ERROR OBJECT:
${err ? err.stack : "no stack"}
`;
};
</script>

</body>
</html>